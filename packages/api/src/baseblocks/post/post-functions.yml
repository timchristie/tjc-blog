# Admin-only endpoints (require authentication)
ApiPostAdmin:
  handler: src/baseblocks/post/post-api.handler
  events:
    - http:
        path: /post
        method: POST
        authorizer:
          type: COGNITO_USER_POOLS
          authorizerId:
            Ref: ApiGatewayAuthorizer
        cors:
          origin: ${self:custom.apiCorsOrigin}
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: false
    - http:
        path: /post
        method: PATCH
        authorizer:
          type: COGNITO_USER_POOLS
          authorizerId:
            Ref: ApiGatewayAuthorizer
        cors:
          origin: ${self:custom.apiCorsOrigin}
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: false
    - http:
        path: /post/{postId}
        method: DELETE
        authorizer:
          type: COGNITO_USER_POOLS
          authorizerId:
            Ref: ApiGatewayAuthorizer
        cors:
          origin: ${self:custom.apiCorsOrigin}
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: false

# Public endpoints (no authentication required)
ApiPostPublic:
  handler: src/baseblocks/post/post-api.handler
  events:
    - http:
        path: /post/list
        method: GET
        cors:
          origin: ${self:custom.apiCorsOrigin}
          headers:
            - Content-Type
            - X-Amz-Date
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: false
    - http:
        path: /post/{postId}
        method: GET
        cors:
          origin: ${self:custom.apiCorsOrigin}
          headers:
            - Content-Type
            - X-Amz-Date
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: false